{% extends 'lectura/base.html' %}

{% block title %}Lista de Libros | Gestor de Lecturas{% endblock %}

{% block content %}
<a href="{% url 'libros:crear_libro' %}" class="btn-add-book" title="Agregar libro">&#43; Agregar libro</a>
<h1>Libros Registrados</h1>
{% if es_admin %}
  <h2>Libros agregados por ti</h2>
  <ul>
    {% for libro in libros_propios %}
      <li>
        <a href="{% url 'libros:detalle_libro' libro.id %}">{{ libro.titulo }}</a> - {{ libro.autor }}
        <span> | Progreso:
          {% with porc=libro.avance_lectura|default_if_none:'0' %}
          <span style="display:inline-block;vertical-align:middle;width:120px;height:16px;background:#eee;border-radius:8px;overflow:hidden;margin:0 6px;">
            <span style="display:block;height:100%;background:#1abc9c;width:{{ porc }}%;transition:width 0.4s;"></span>
          </span>
          <span style="font-size:0.95em;">{{ porc }}%</span>
          {% endwith %}
        </span>
      </li>
    {% empty %}
      <li>No has registrado libros.</li>
    {% endfor %}
    <h2>Libros de otros usuarios</h2>
    <ul>
    {% for libro in libros_otros %}
      <li>
        <a href="{% url 'libros:detalle_libro' libro.id %}">{{ libro.titulo }}</a> - {{ libro.autor }} ({{ libro.usuario }})
        <span> | Progreso:
          {% with porc=libro.avance_lectura|default_if_none:'0' %}
          <div style="display:inline-block;vertical-align:middle;width:120px;height:16px;background:#eee;border-radius:8px;overflow:hidden;margin:0 6px;">
            <div style="height:100%; background:#1abc9c; width:{{ porc }}%; transition:width 0.4s;"></div>
          </div>
          <span style="font-size:0.95em;">{{ porc }}%</span>
          {% endwith %}
        </span>
      </li>
    {% empty %}
      <li>No hay libros de otros usuarios.</li>
    {% endfor %}
  </ul>
{% else %}
  <ul>
    {% for libro in libros %}
      <li>
        <a href="{% url 'libros:detalle_libro' libro.id %}">{{ libro.titulo }}</a> - {{ libro.autor }}
        <span> | Progreso:
          {% with porc=libro.avance_lectura|default_if_none:'0' %}
          <div style="display:inline-block;vertical-align:middle;width:120px;height:16px;background:#eee;border-radius:8px;overflow:hidden;margin:0 6px;">
            <div style="height:100%; background:#1abc9c; width:{{ porc }}%; transition:width 0.4s;"></div>
          </div>
          <span style="font-size:0.95em;">{{ porc }}%</span>
          {% endwith %}
        </span>
      </li>
    {% empty %}
      <li>No hay libros registrados.</li>
    {% endfor %}
  </ul>
{% endif %}
<style>
.btn-add-book {
    display: inline-block;
    margin-bottom: 18px;
    padding: 10px 24px;
    background: linear-gradient(135deg, #1abc9c 60%, #16a085 100%);
    color: #fff;
    border-radius: 24px;
    font-size: 1.15em;
    font-weight: 600;
    text-decoration: none;
    box-shadow: 0 2px 8px rgba(44,62,80,0.10);
    transition: box-shadow 0.2s, background 0.2s;
}
.btn-add-book:hover {
    background: linear-gradient(135deg, #16a085 60%, #1abc9c 100%);
    box-shadow: 0 4px 16px rgba(44,62,80,0.18);
    color: #fff;
    text-decoration: none;
}
</style>
{% endblock %}
